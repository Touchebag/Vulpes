{
    "templates": {
        "airborne": {
            "properties": {
                "touching_ground": false
            },
            "physics_constants": {
                "x_acceleration": 1.5,
                "x_friction": 0.93
            }
        },
        "dashing": {
            "properties": {
                "touching_ground": false,
                "movement_locked_x": true,
                "movement_locked_y": true
            }
        },
        "can_dash": {
            "ai": [
                "on_enter if (flag 'Action.dash') then (enable_action dash)",
                "on_exit disable_action dash"
            ]
        },
        "can_attack": {
            "ai": [
                "on_enter if (flag 'Action.attack1') then (enable_action attack1)",
                "on_exit disable_action attack1"
            ]
        },
        "can_interact": {
            "ai": [
                "on_enter enable_action interact",
                "on_exit disable_action interact"
            ]
        },
        "wall_stick": {
            "ai": [
                "move this 0.01 0.0"
            ],
            "physics_constants": {
                "gravity": 0.0,
                "y_acceleration": 1.5,
                "y_friction": 0.93
            }
        },
        "ledge_climb_sensors": {
            "next_states": [
                {"event": "ledge_climb", "state": "ledge_climb"}
            ],
            "collideables": [
                {
                    "type": "sensor",
                    "name": "ledge_climb_top",
                    "width": 100,
                    "height": 200,
                    "offset": {
                        "x": 50,
                        "y": -200
                    }
                },
                {
                    "type": "sensor",
                    "name": "ledge_climb_bottom",
                    "width": 30,
                    "height": 150,
                    "offset": {
                        "x": 40,
                        "y": 0
                    }
                }
            ]
        }
    },
    "states": {
        "main": {
            "next_states": [
                {"event": "start", "state": "idle"}
            ],
            "ai": [
                "on_exit disable_action dash",
                "on_exit disable_action attack1"
            ],
            "animation": "idle"
        },
        "idle": {
            "next_states": [
                {"event": "moving_x", "state": "running"},
                {"event": "jumping", "state": "jump_start"},
                {"event": "airborne", "state": "falling"},
                {"event": "dashing", "state": "dash_startup"},
                {"event": "action_attack1", "state": "attack"},
                {"event": "action_attack2", "state": "shoot"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "templates": [
                "can_interact",
                "can_dash",
                "can_attack"
            ],
            "animation": "idle"
        },
        "running": {
            "templates": [
                "can_interact"
            ],
            "next_states": [
                {"event": "no_movement_x", "state": "idle"},
                {"event": "jumping", "state": "jump_start"},
                {"event": "airborne", "state": "falling"},
                {"event": "dashing", "state": "dash_startup"},
                {"event": "action_attack1", "state": "attack"},
                {"event": "action_attack2", "state": "shoot"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "templates": [
                "can_dash",
                "can_attack"
            ],
            "animation": "running"
        },
        "jump_start": {
            "templates": [
                "airborne"
            ],
            "properties": {
                "can_jump": false,
                "can_air_dive": false
            },
            "frame_timer": 3,
            "next_states": [
                {"event": "touching_floor", "state": "idle"},
                {"event": "touching_wall", "state": "wall_slide_rising"},
                {"event": "frame_timeout", "state": "jumping"},
                {"event": "dashing", "state": "dash_startup"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "jumping"
        },
        "jumping": {
            "properties": {
                "can_jump": true,
                "can_air_dive": true
            },
            "next_states": [
                {"event": "touching_floor", "state": "idle"},
                {"event": "touching_wall", "state": "wall_slide_rising"},
                {"event": "jumping", "state": "jump_start"},
                {"event": "falling", "state": "falling"},
                {"event": "dashing", "state": "dash_startup"},
                {"event": "air_diving", "state": "air_dive_start"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "jumping",
            "templates": [
                "airborne",
                "can_dash",
                "ledge_climb_sensors"
            ]
        },
        "falling": {
            "properties": {
                "can_jump": true,
                "can_air_dive": true
            },
            "next_states": [
                {"event": "touching_floor", "state": "idle"},
                {"event": "touching_wall", "state": "wall_slide"},
                {"event": "jumping", "state": "jump_start"},
                {"event": "dashing", "state": "dash_startup"},
                {"event": "air_diving", "state": "air_dive_start"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "falling",
            "templates": [
                "ledge_climb_sensors",
                "can_dash",
                "airborne"
            ]
        },
        "wall_slide_rising": {
            "properties": {
                "touching_ground": false,
                "touching_wall": true
            },
            "frame_timer": 10,
            "next_states": [
                {"event": "touching_floor", "state": "idle"},
                {"event": "jumping", "state": "wall_jump"},
                {"event": "falling", "state": "wall_slide"},
                {"event": "airborne", "state": "wall_jump_grace_period"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "jumping",
            "templates": [
                "wall_stick",
                "ledge_climb_sensors"
            ]
        },
        "wall_slide": {
            "properties": {
                "touching_ground": false,
                "touching_wall": true
            },
            "frame_timer": 10,
            "next_states": [
                {"event": "touching_floor", "state": "idle"},
                {"event": "jumping", "state": "wall_jump"},
                {"event": "airborne", "state": "wall_jump_grace_period"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "wall_slide",
            "templates": [
                "wall_stick",
                "ledge_climb_sensors"
            ]
        },
        "wall_jump_grace_period": {
            "properties": {
                "touching_ground": false,
                "touching_wall": true
            },
            "frame_timer": 10,
            "next_states": [
                {"event": "touching_floor", "state": "idle"},
                {"event": "touching_wall", "state": "wall_slide"},
                {"event": "jumping", "state": "wall_jump"},
                {"event": "dashing", "state": "dash_startup"},
                {"event": "frame_timeout", "state": "falling"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "templates": [
                "can_dash"
            ],
            "animation": "falling"
        },
        "wall_jump": {
            "properties": {
                "touching_ground": false,
                "can_jump": false,
                "can_air_dive": true
            },
            "frame_timer": 10,
            "next_states": [
                {"event": "touching_wall", "state": "wall_slide"},
                {"event": "dashing", "state": "dash_startup"},
                {"event": "frame_timeout", "state": "jump_start"},
                {"event": "air_diving", "state": "air_dive_start"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "jumping",
            "physics_constants": {
                "jump_impulse_x": -50.0,
                "jump_impulse_y": -45.0
            },
            "templates": [
                "can_dash",
                "airborne"
            ]
        },
        "dash_startup": {
            "properties": {
                "dashing": false
            },
            "frame_timer": 1,
            "next_states": [
                {"event": "frame_timeout", "state": "dashing"}
            ],
            "spawn_entity": {
                "Entity": "shaders/shockwave"
            },
            "templates": [
                "dashing"
            ],
            "animation": "dashing"
        },
        "dashing": {
            "properties": {
                "dashing": true
            },
            "frame_timer": 10,
            "next_states": [
                {"event": "touching_floor", "state": "idle"},
                {"event": "touching_wall", "state": "wall_slide"},
                {"event": "jumping", "state": "jump_start"},
                {"event": "frame_timeout", "state": "falling"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "templates": [
                "dashing"
            ],
            "animation": "dashing"
        },
        "attack": {
            "properties": {
                "movement_locked_x": true,
                "movement_locked_y": true
            },
            "frame_timer": 0,
            "spawn_entity": {
                "Entity": "attack"
            },
            "next_states": [
                {"event": "jumping", "state": "jump_start"},
                {"event": "frame_timeout", "state": "attack_end_lag"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "idle"
        },
        "attack_end_lag": {
            "properties": {
                "movement_locked_x": true,
                "movement_locked_y": true
            },
            "frame_timer": 30,
            "next_states": [
                {"event": "jumping", "state": "jump_start"},
                {"event": "frame_timeout", "state": "idle"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "idle"
        },
        "shoot": {
            "properties": {
                "movement_locked_x": true,
                "movement_locked_y": true
            },
            "frame_timer": 0,
            "spawn_entity": {
                "Entity": "attack",
                "Movement": {
                    "x_speed": 20
                }
            },
            "next_states": [
                {"event": "jumping", "state": "jump_start"},
                {"event": "frame_timeout", "state": "shoot_end_lag"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "idle"
        },
        "shoot_end_lag": {
            "properties": {
                "movement_locked_x": true,
                "movement_locked_y": true
            },
            "frame_timer": 30,
            "next_states": [
                {"event": "jumping", "state": "jump_start"},
                {"event": "frame_timeout", "state": "idle"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "idle"
        },
        "taking_damage": {
            "properties": {
                "touching_ground": false,
                "movement_locked_x": true,
                "can_jump": false
            },
            "frame_timer": 15,
            "next_states": [
                {"event": "frame_timeout", "state": "falling"}
            ],
            "animation": "falling"
        },
        "air_dive_start": {
            "properties": {
                "touching_ground": false,
                "movement_locked_x": true,
                "can_jump": false,
                "air_diving": true
            },
            "next_states": [
                {"event": "touching_floor", "state": "hard_landing"},
                {"event": "frame_timeout", "state": "air_dive"},
                {"event": "dive_bounce", "state": "falling"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "air_diving",
            "frame_timer": 14,
            "collideables": [
                {
                    "type": "player_dive",
                    "width": 150,
                    "height": 200,
                    "offset": {
                        "x": 0,
                        "y": 200
                    }
                }
            ]
        },
        "air_dive": {
            "properties": {
                "touching_ground": false,
                "movement_locked_x": true,
                "can_jump": false,
                "air_diving": true
            },
            "next_states": [
                {"event": "touching_floor", "state": "hard_landing"},
                {"event": "dive_bounce", "state": "falling"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "falling",
            "collideables": [
                {
                    "type": "player_dive",
                    "width": 150,
                    "height": 200,
                    "offset": {
                        "x": 0,
                        "y": 200
                    }
                }
            ]
        },
        "hard_landing": {
            "properties": {
                "movement_locked_x": true,
                "movement_locked_y": true
            },
            "frame_timer": 20,
            "next_states": [
                {"event": "jumping", "state": "jump_start"},
                {"event": "frame_timeout", "state": "idle"},
                {"event": "damaged", "state": "taking_damage"}
            ],
            "animation": "hard_landing"
        },
        "ledge_climb": {
            "properties": {
                "movement_locked_x": true,
                "movement_locked_y": true,
                "can_jump": false
            },
            "frame_timer": 5,
            "next_states": [
                {"event": "frame_timeout", "state": "idle"}
            ],
            "animation": "ledge_climb"
        }
    }
}
